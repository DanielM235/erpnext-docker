# ERPNext Docker Production Environment Configuration
# =================================================================
# IMPORTANT: This is a template file. Copy this to .env and 
# update all values with your production settings.
# 
# Command: cp .env.example .env
# Then edit: nano .env
# =================================================================

# =================================================================
# DATABASE CONFIGURATION - REQUIRED
# =================================================================
# MariaDB/MySQL root password - use a strong, unique password
# Minimum 16 characters with mixed case, numbers, and symbols
DB_ROOT_PASSWORD=your_very_secure_root_password_here_min_16_chars

# Application database password - different from root password
# This is used by ERPNext to connect to the database
DB_PASSWORD=your_secure_app_database_password_here

# Database name for ERPNext
# Convention: use project_environment format (e.g., erpnext_prod)
DB_NAME=erpnext_production

# Database user for ERPNext application
# This user will have full access to the ERPNext database only
DB_USER=erpnext_user

# Database host - use service name from docker-compose.yml
# Default: 'db' (matches the database service name)
DB_HOST=db

# Database port - standard MySQL/MariaDB port
# Keep default unless you have specific networking requirements
DB_PORT=3306

# =================================================================
# ERPNEXT APPLICATION CONFIGURATION - REQUIRED
# =================================================================
# Primary domain name for your ERPNext installation
# This must match your DNS configuration and SSL certificate
# Example: erp.yourcompany.com or erpnext.example.org
SITE_NAME=your-domain.com

# ERPNext administrator password
# This will be the password for the Administrator user
# Use a strong password with minimum 12 characters
ADMIN_PASSWORD=your_admin_password_min_12_chars

# ERPNext secret key for encryption and security
# Generate a random 32+ character string
# You can use: openssl rand -hex 32
SECRET_KEY=your_32_plus_character_random_secret_key_for_encryption

# ERPNext version tag - specify exact version for production
# Check available versions: https://hub.docker.com/r/frappe/erpnext/tags
# Examples: v14.27.0, v13.45.0 (avoid 'latest' in production)
ERPNEXT_VERSION=v14.27.0

# =================================================================
# REVERSE PROXY CONFIGURATION - REQUIRED
# =================================================================
# Virtual host for nginx proxy integration
# Usually same as SITE_NAME unless you have complex proxy setup
VIRTUAL_HOST=${SITE_NAME}

# Let's Encrypt configuration for SSL certificates
# Domain for SSL certificate (usually same as SITE_NAME)
LETSENCRYPT_HOST=${SITE_NAME}

# Email for Let's Encrypt notifications and certificate management
# Use a valid email address that you monitor regularly
LETSENCRYPT_EMAIL=admin@yourcompany.com

# =================================================================
# PERFORMANCE AND SCALING - OPTIONAL
# =================================================================
# Number of worker processes for ERPNext
# Recommended: Number of CPU cores (check with: nproc)
# Default: 4 (suitable for 4+ core systems)
WORKER_PROCESSES=4

# Maximum worker connections per process
# Higher values support more concurrent users
# Default: 1024 (suitable for medium traffic)
MAX_WORKER_CONNECTIONS=1024

# Redis memory limit for caching
# Adjust based on available system memory
# Examples: 256mb, 512mb, 1gb, 2gb
REDIS_MAXMEMORY=512mb

# Redis eviction policy when memory limit is reached
# Recommended: allkeys-lru (removes least recently used keys)
REDIS_MAXMEMORY_POLICY=allkeys-lru

# =================================================================
# BACKUP CONFIGURATION - RECOMMENDED
# =================================================================
# Backup schedule in cron format (when automatic backups run)
# Default: 0 2 * * * (daily at 2:00 AM server time)
# Examples: 0 1 * * * (1 AM), 30 3 * * 0 (Sunday 3:30 AM)
BACKUP_SCHEDULE=0 2 * * *

# Number of backup files to retain (older backups are deleted)
# Recommended: 7-30 days depending on your backup strategy
# Consider disk space and compliance requirements
BACKUP_RETENTION=7

# Backup storage location (relative to project root)
# This directory will store database dumps and site backups
BACKUP_PATH=./backups

# =================================================================
# LOGGING AND MONITORING - OPTIONAL
# =================================================================
# Log level for ERPNext application
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Production recommended: WARNING or ERROR
LOG_LEVEL=WARNING

# Maximum log file size before rotation
# Examples: 10m, 50m, 100m (megabytes)
LOG_MAX_SIZE=10m

# Number of rotated log files to keep
# Balances disk usage with debugging capability
LOG_MAX_FILES=5

# Enable detailed SQL query logging (for debugging only)
# WARNING: This can log sensitive data and affect performance
# Only enable temporarily for troubleshooting
# Values: true, false
SQL_DEBUG=false

# =================================================================
# SECURITY CONFIGURATION - OPTIONAL BUT RECOMMENDED
# =================================================================
# Session timeout in seconds
# Default: 3600 (1 hour) - adjust based on security requirements
# Shorter timeouts are more secure but less convenient
SESSION_TIMEOUT=3600

# Maximum login attempts before account lockout
# Helps prevent brute force attacks
# Default: 5 attempts
MAX_LOGIN_ATTEMPTS=5

# Account lockout duration in seconds after failed login attempts
# Default: 300 (5 minutes)
LOCKOUT_DURATION=300

# Enable two-factor authentication by default for new users
# Highly recommended for production environments
# Values: true, false
ENABLE_2FA_DEFAULT=true

# =================================================================
# DOCKER RESOURCE LIMITS - OPTIONAL BUT RECOMMENDED
# =================================================================
# Memory limit for ERPNext application container
# Adjust based on your system's available memory
# Examples: 2g, 4g, 8g (gigabytes)
ERPNEXT_MEMORY_LIMIT=4g

# CPU limit for ERPNext application (number of CPUs)
# Examples: 1.0, 2.0, 4.0 (number of CPU cores)
ERPNEXT_CPU_LIMIT=2.0

# Memory limit for database container
# Database typically needs significant memory for performance
# Examples: 1g, 2g, 4g (gigabytes)
DB_MEMORY_LIMIT=2g

# CPU limit for database container
# Examples: 1.0, 2.0 (number of CPU cores)
DB_CPU_LIMIT=1.0

# =================================================================
# DEVELOPMENT AND TESTING - OPTIONAL
# =================================================================
# Enable development mode (only use in non-production environments)
# This enables debug features and detailed error messages
# WARNING: Never enable in production as it exposes sensitive information
# Values: true, false
DEVELOPER_MODE=false

# Enable bench command access (for maintenance and development)
# Allows running bench commands from within containers
# Values: true, false
ENABLE_BENCH=false

# =================================================================
# NOTIFICATIONS AND INTEGRATIONS - OPTIONAL
# =================================================================
# SMTP server configuration for email notifications
# Leave blank to disable email features
MAIL_SERVER=
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USERNAME=
MAIL_PASSWORD=

# Webhook URL for system notifications (Slack, Discord, etc.)
# Leave blank to disable webhook notifications
WEBHOOK_URL=

# =================================================================
# CUSTOM CONFIGURATION - OPTIONAL
# =================================================================
# Custom apps to install (comma-separated list)
# Examples: payments,hrms,ecommerce
# Leave blank to install only ERPNext
CUSTOM_APPS=

# Custom themes or configurations
# Path to custom configuration files
CUSTOM_CONFIG_PATH=

# =================================================================
# USAGE INSTRUCTIONS
# =================================================================
# 1. Copy this file: cp .env.example .env
# 2. Edit the .env file with your actual values
# 3. Ensure all REQUIRED variables are set
# 4. Generate strong passwords for all password fields
# 5. Update SITE_NAME to your actual domain
# 6. Configure your DNS to point to your server
# 7. Run: docker compose up -d
# 8. Monitor logs: docker compose logs -f
# 
# Security reminders:
# - Never commit the .env file to version control
# - Use strong, unique passwords for all accounts
# - Regularly update passwords and review access
# - Monitor logs for suspicious activity
# - Keep Docker images updated
# =================================================================